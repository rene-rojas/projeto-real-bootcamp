ğŸ§ª Testes UnitÃ¡rios no .NET
ğŸ“Œ 1. O que sÃ£o Testes UnitÃ¡rios?
Testes unitÃ¡rios sÃ£o pequenos testes automatizados que verificam se uma unidade de cÃ³digo (geralmente um mÃ©todo ou funÃ§Ã£o) funciona corretamente de forma isolada.
âœ”ï¸ â€œUnidadeâ€ = o menor pedaÃ§o testÃ¡vel da aplicaÃ§Ã£o (ex: um mÃ©todo).
âœ”ï¸ â€œIsoladoâ€ = sem depender de banco, API externa, arquivos, etc.
âœ”ï¸ Objetivo = garantir que o cÃ³digo faÃ§a exatamente o que foi planejado.
________________________________________
ğŸ“Œ 2. Para que servem os Testes UnitÃ¡rios?
ğŸ¯ 2.1 Garantir que o cÃ³digo funciona
Ajudam a validar a lÃ³gica da aplicaÃ§Ã£o logo no comeÃ§o do processo.
ğŸ”„ 2.2 Evitar regressÃµes
Quando vocÃª altera algo no cÃ³digo, os testes confirmam que nada que jÃ¡ estava funcionando quebrou.
ğŸ› ï¸ 2.3 Facilitar refatoraÃ§Ãµes
Com testes, vocÃª pode melhorar o cÃ³digo com mais confianÃ§a.
ğŸ“š 2.4 Servir como documentaÃ§Ã£o viva
O prÃ³prio teste explica â€œcomo usarâ€ o mÃ©todo, deixando claro quais comportamentos sÃ£o esperados.
âš™ï¸ 2.5 Automatizar validaÃ§Ãµes
Ao rodar o comando dotnet test, vocÃª confirma automaticamente que tudo estÃ¡ funcionando.
________________________________________
ğŸ“Œ 3. Por que os Testes UnitÃ¡rios sÃ£o importantes?
Sem testes unitÃ¡rios, vocÃª depende de:
â€¢	Testes manuais repetitivos
â€¢	Risco de bugs silenciosos
â€¢	Dificuldade de manter o cÃ³digo no longo prazo
â€¢	Medo de mexer no cÃ³digo por receio de quebrar algo
Com testes unitÃ¡rios:
â€¢	O software fica mais robusto
â€¢	A manutenÃ§Ã£o fica mais segura
â€¢	O time ganha agilidade
â€¢	O cÃ³digo se torna mais modular, jÃ¡ que mÃ©todos muito grandes sÃ£o difÃ­ceis de testar
________________________________________
ğŸ§± 4. Estrutura de Testes UnitÃ¡rios no .NET
O .NET trabalha muito bem com frameworks de testes como:
â€¢	xUnit (mais moderno, muito usado)
â€¢	NUnit
â€¢	MSTest
O mais recomendado hoje Ã© xUnit, especialmente em projetos novos.

ğŸ“¦ Criando um projeto de testes:

dotnet new xunit -n MinhaApi.Tests

ğŸ”— Referenciando o projeto principal:

Rodar na pasta Projeto de estudos:
dotnet add MinhaApi.Tests reference MinhaApi	

Por que o projeto de testes precisa referenciar o projeto principal?
Em termos prÃ¡ticos e do compilador, Ã© por trÃªs motivos principais:
1.	Acesso ao cÃ³digo que serÃ¡ testado (resoluÃ§Ã£o de sÃ­mbolos)
o	Seus testes chamam classes/mÃ©todos definidos no projeto principal. Sem a referÃªncia, o compilador do projeto de testes nÃ£o conhece esses tipos (erros como â€œThe type or namespace name â€˜Xâ€™ could not be foundâ€).
o	A referÃªncia cria uma dependÃªncia de compilaÃ§Ã£o: o projeto de testes â€œenxergaâ€ os namespaces, classes e mÃ©todos pÃºblicos (e os internal se vocÃª liberar via InternalsVisibleTo, veja abaixo).
2.	Build e versionamento consistentes
o	Com uma ProjectReference, o dotnet test sabe buildar na ordem certa: primeiro o projeto principal, depois os testes que dependem dele, garantindo que os testes sempre rodem contra o cÃ³digo mais recente.
o	Evita o risco de testar contra um DLL antigo (o que pode acontecer se vocÃª adiciona um arquivo .dll estÃ¡tico ao invÃ©s de uma ProjectReference).
3.	Descoberta e execuÃ§Ã£o pelo test runner
o	O runner (xUnit/NUnit/MSTest via dotnet test/IDE) carrega o assembly de testes e, por tabela, precisa carregar o assembly do SUT (System Under Test) referenciado para instanciar classes, executar mÃ©todos e avaliar asserts.

Colocar no MinhaApi.Tests.csproj

<ItemGroup>
    <PackageReference Include="xunit" Version="2.7.0" />
    <PackageReference Include="xunit.runner.visualstudio" Version="2.5.7">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />
  </ItemGroup>

Criar a classe de testes unitÃ¡rios.

Rodar dotnet test.

Para ver a porcentagem da cobertura de testes unitÃ¡rios, primeiro instale o directory:

dotnet test --collect "XPlat Code Coverage" --results-directory TestResults

Depois na pasta do coverage, rode esse comando:

reportgenerator -reports:"TestResults/**/coverage.cobertura.xml" -targetdir:TestResults/coverage-report -reporttypes:"Html;TextSummary"


type Summary.txt
